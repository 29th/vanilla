<!doctype html>
<html>
   <head>
      <title>Embed Container for easyXDM</title>
      <script type="text/javascript" src="js/easyXDM/easyXDM.min.js"></script>
      <script type="text/javascript">
         easyXDM.DomHelper.requiresJSON("js/easyXDM/json2.js");
         
         easyXDM.Socket.prototype.callRemote = function(func, args, success, failure) {
            var options = { func: func, args: args, success: success, failure: failure, id: Math.floor(Math.random()*4294967295) };
            this.postMessage(JSON.stringify(options));
         };
         
         var iframe;
         var socket = new easyXDM.Socket({
            swf: "js/easyXDM/easyxdm.swf",
            onReady: function(){
               iframe = document.createElement("iframe");
               iframe.frameBorder = 0;
               document.body.appendChild(iframe);
               iframe.src = easyXDM.query.url;
            },
            onMessage: function(message, origin) {
               var data = JSON.parse(message);
               var func = iframe[data.func];

               data.args = data.args || [];
               if ((typeof data.args) == 'string')
                  data.args = [data.args];
               
               if (data.func == 'setLocation') {
                  iframe.src = data.args[0];
                  return;
               }
               
               if ((typeof func) != 'object')
                  throw new Error(data.func+' is not a function.');

               var result = func.apply(this, data.args);
            }
         });
      </script>
      <style type="text/css">
         html, body {
            overflow: hidden;
            margin: 0px;
            padding: 0px;
            width: 100%;
            height: 100%;
         }

         iframe {
            width: 100%;
            height: 100%;
            border: 0px;
         }
      </style>
   </head>
   <body>
   </body>
</html>